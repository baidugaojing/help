<!DOCTYPE html>
<html>
  <head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta http-equiv="X-UA-Compatible" content="chrome=1,IE=edge" />
	<title>index</title>
	<style>
		html {
			height:100%;
		}
		body {
			background-color:#FFFFFF;
			margin:0;
			height:100%;
		}
	</style>
	<!-- copy these lines to your document head: -->

	<meta name="viewport" content="user-scalable=yes, width=1024" />

	<!-- end copy -->
  </head>
  <body>
	<!-- copy these lines to your document: -->

	<div id="index_hype_container" style="margin:auto;position:relative;width:1024px;height:4000px;overflow:hidden;" aria-live="polite">
		<script type="text/javascript" charset="utf-8" src="index.hyperesources/index_hype_generated_script.js?71582"></script>
	</div>

	<!-- end copy -->
	


	<!-- text content for search engines: -->

	<div style="display:none">

		<div>成员通过左侧升级策略菜单项进入升级策略管理页面，并在此页面对升级策略进行创建、修改、删除等操作，如下图所

示。
</div>
		<div>故障分发
外部监控系统推送到通告平台中所有满足适配规则的事件所生成的故障会按照相应的升级策略进行升级。如上图所示，

所有满足适配规则“[critical][host135][cpu_idle].*”的事件所生成的故障会按照升级策略“Hao123-Critical升级策略”进行

升级，而所有满足适配规则“[warning][host135][cpu_idle].*”的事件所生成的故障会按照升级策略“Hao123-Warning升级

策略”进行升级。

有多条适配规则存在时，事件一旦满足某一条适配规则便停止适配。

故障合并
如上图所示，监控系统推送到通告平台中的满足适配规则的所有事件在启用合并规则的情况下会合并到同一个故障中，

并按照相应的升级策略进行升级。

例如，外部监控系统推送的事件“[critical][host135][cpu_idle]value=10%“与事件“[critical][host135][cpu_idle]value=

8%”将会合并到同一个故障，并应用升级策略 “Hao123-Critical升级策略”进行升级。
当监控出现瞬报的时候，轰炸式告警对用户的工作和生活会造成极大的打扰，此时利用合并规则就可以解决这种问题。

状态回调
如上图所示，故障升级或者被认领解决后，会将故障的状态反馈给成员配置的回调地址，这样第三方系统就可以掌握它

们故障的生命周期。

启用停用
服务可以被启用与停用，处于停用状态的服务不会接收来自监控系统推送的异常事件从而也不会生成故
障，产生告警，开关如下图所示。



</div>
		<div>由上图可知Hao123升级策略按照如下策略发送故障的告警，当某个应用了该升级策略的服务触发故障后，系统马上通

过电话、短信、邮件和微信的方式把告警内容发送给值班表 OP值班 中的当前值班人； 15分钟之后，如果该故障还未解

决，系统会将故障升级到第二级，并通过电话、短信、邮件和微信的方把告警内容发送给DEV组 中的所有人；再过10

分钟，若该故障还处于未解决状态，系统会将该故障升级到第三级，并通过电话、短信、邮件和微信的方式把告警内容

发送给经理；再过10分钟之后，故障如果依然没被解决，则该告警流程结束。在整个升级的过程中，任何时刻故障一旦

被空间内的某位成员解决，则故障的升级流程结束，故障的状态变为已解决。

空间内，一条升级策略可以被多个服务应用。
</div>
		<div>服务管理
</div>
		<div>点击保存，生成升级策略，如下：

</div>
		<div>策略管理
</div>
		<div>升级策略创建完成后，用户需从左侧导航栏服务管理菜单项进入服务管理页面，并在此页面创建服务，如下图所示。

</div>
		<div><?php$config = array('service_id' => 1042,'service_key' => '5f0ff0c51a99b358e32ccb176d8d4f8f',);$node = $argv[1];$summary = $argv[2];$description = '节点['.$node.']触发告警，告警详情为:'.$summary;$url = 'http://gaojing.baidu.com/event/create';$data = array('service_id' => $config['service_id'],'description' => $description,'event_type' => 'trigger',);$headers[] = 'servicekey:'.$config['service_key'];post($url, $data, $headers);function post($url, $data, $headers){$data = json_encode($data);print_r($headers);$ch = curl_init();curl_setopt($ch, CURLOPT_URL, $url);curl_setopt($ch, CURLOPT_POSTFIELDS, $data);curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);$response = curl_exec($ch);$response_code = curl_getinfo($ch, CURLINFO_HTTP_CODE);//print_r($response_code);/*if($response_code !== 200){try{throw new Exception("curl url: ".$url ." with ".$data." fail ");}catch (Exception $e){print "error message".$e->getMessage();var_dump($response_code);var_dump(utf8_decode($response));}}*/curl_close($ch);$response = json_decode($response);print_r($response);return $response;}</div>
		<div>
</div>
		<div>#! /bin/bashAPP_ID="free_trial"TOKEN="MjYxOTNjMTkyZTJjZjgzODA5OGVkNjQyYzgzOGUwMjY="USER_ID="0"RECEIVER=$1DESCRIPTION=$2DATA="[{channel : \"sms\", description : \"$DESCRIPTION\",receiver : \"$RECEIVER\"}]"INPUT=${TOKEN}${APP_ID}${DATA}SIGNATURE=`echo -n $INPUT|md5|awk '{print $1}'`curl -H "appid:$APP_ID" -H "token:$TOKEN" -H "userid:$USER_ID" -H "signature:$SIGNATURE" -X POST -d "$DATA" http://tonggao.baidu.com/AlertList/push</div>
		<div>./send.sh 13924600771 这是来自百度告警平台的测试短信</div>
		<div>Step 2：通过 shell 执行 send.sh 脚本，并传入电话号码与要发送的内容，如下所示：</div>
		<div>示例 send.sh 中的短信发送账号 free_trial 仅供测试使用，如需商用，可通过如下方式联系我们：
邮箱：gaojing@baidu.com
电话：13924600771
QQ群：183806029

</div>
		<div>百度告警平台提供短信的发送功能，可按如下步骤进行试用：

Step 1：下载 send.sh 脚本，脚本内容如下所示：

</div>
		<div> 帮助文档
</div>
		<div>故障管理
</div>
		<div>SDK接入
</div>
		<div>Nagios接入指南
</div>
		<div>空间管理
</div>
		<div>策略管理
</div>
		<div>API接入
</div>
		<div>数据分析
</div>
		<div>Zabbix接入指南
</div>
		<div>Python
</div>
		<div>发送短信接入
</div>
		<div></div>
		<div>推送事件
</div>
		<div>
</div>
		<div>案例场景
</div>
		<div>OpenFact接入指南
</div>
		<div>服务管理
</div>
		<div>推送消息
</div>
		<div>产品介绍
</div>
		<div>产品手册
</div>
		<div>Java
</div>
		<div>功能介绍
</div>
		<div>接入
</div>
		<div>PHP
</div>
		<div>账号管理
</div>
		<div>成员管理
</div>

	</div>

	<!-- end text content: -->

  </body>
</html>
